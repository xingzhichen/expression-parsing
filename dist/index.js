!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(window,function(){return n={},i.m=t=[function(e,r,t){"use strict";t.r(r);var s={"!":!0,"-":!0,"+":!0},a={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,"+":9,"-":9,"*":10,"/":10,"%":10},u={undefined:void 0,null:null,false:!1,true:!0},i=".",o="[",h="]",p=")",c="Literal",l="MemberExpression";function f(e){return e.reduce(function(e,r){return"string"!=typeof r&&"number"!=typeof r||(e[r]=!0),e},{})}function n(r,e){return e.forEach(function(e){delete r[e]}),Array.isArray(r)?r.filter(function(e){return e}):r}function y(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)}return t}function v(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?y(t,!0).forEach(function(e){d(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):y(t).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function x(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g=function(){function i(e){var r=e.unaryOps,t=e.binaryOps,n=e.literals;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,i),this.maxBinaryLen=1,this.maxUnary=1,this.binaryOps=v({},a),this.unaryOps=v({},s),this.literals=v({},u),t&&Object.keys(t).length&&(this.binaryOps=v({},t)),r&&r.length&&(this.unaryOps=v({},f(r))),n&&Object.keys(n).length&&(this.literals=v({},n)),this.maxBinaryLen=this.getMaxBinaryLen(),this.maxUnary=this.getMaxUnaryLen()}return function(e,r,t){r&&x(e.prototype,r),t&&x(e,t)}(i,[{key:"getMaxBinaryLen",value:function(){return Object.keys(this.binaryOps).reduce(function(e,r){return r.length>e?r.length:e},1)}},{key:"getMaxUnaryLen",value:function(){return Object.keys(this.unaryOps).reduce(function(e,r){return r.length>e?r.length:e},1)}},{key:"addBinaryOps",value:function(e){var r=0<arguments.length&&void 0!==e?e:{};return this.binaryOps=v({},this.binaryOps,{},r),this.maxBinaryLen=this.getMaxBinaryLen(),this}},{key:"addUnaryOps",value:function(e){var r=0<arguments.length&&void 0!==e?e:[];return this.unaryOps=v({},this.unaryOps,{},f(r)),this.maxUnary=this.getMaxUnaryLen(),this}},{key:"addLiterals",value:function(e){var r=0<arguments.length&&void 0!==e?e:{};return this.literals=v({},this.literals,{},r),this}},{key:"removeUnaryOps",value:function(e){var r=0<arguments.length&&void 0!==e?e:[];return n(this.unaryOps,r),this.maxUnary=this.getMaxUnaryLen(),this}},{key:"removeBinaryOps",value:function(e){var r=0<arguments.length&&void 0!==e?e:[];return n(this.binaryOps,r),this.maxBinaryLen=this.getMaxBinaryLen(),this}},{key:"removeLiterals",value:function(e){var r=0<arguments.length&&void 0!==e?e:[];return n(this.literals,r),this}},{key:"getUnaryOps",value:function(){return Object.keys(this.unaryOps)}},{key:"getBinaryOps",value:function(){return v({},this.binaryOps)}},{key:"getLiterals",value:function(){return v({},this.literals)}}]),i}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,r){return!r||"object"!==b(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):r}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,r){return(k=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}t.d(r,"ExpressionParse",function(){return j});var j=function(){function n(e){var r;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,n),(r=C(this,m(n).call(this,e))).expression="",r.index=0;var t=e.expression;return r.expression=t,r}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&k(e,r)}(n,g),function(e,r,t){r&&O(e.prototype,r),t&&O(e,t)}(n,[{key:"error",value:function(e,r){var t=0<arguments.length&&void 0!==e?e:"Unexpected ".concat(this.getCurrentChar()),n=1<arguments.length?r:void 0;throw new Error("".concat(t," at character ").concat(n||this.index))}},{key:"getCurrentChar",value:function(){return this.expression[this.index]}},{key:"jumpOverSpace",value:function(){for(var e=/\s/;this.index<this.expression.length;){var r=this.getCurrentChar();if(!r||!e.test(r))return;this.index++}}},{key:"isIdentifierStart",value:function(e){return!!e&&/[\$_A-Za-z]/.test(e)}},{key:"isIdentifierPart",value:function(e){return!!e&&/[\$_A-Za-z0-9]/.test(e)}},{key:"getAst",value:function(){this.index=0;for(var e=[this.parseExpression()];this.index<this.expression.length;){this.jumpOverSpace(),";"===this.getCurrentChar()&&this.index++;var r=this.parseExpression();e.push(r)}return 1<e.length?e:e[0]}},{key:"parseExpression",value:function(){if(!this.expression)return null;var e=this.parseBinaryExpression();if(this.jumpOverSpace(),"?"!==this.getCurrentChar())return e;this.index++;var r=this.parseExpression();r||this.error("Expected Expression"),":"!==this.getCurrentChar()&&this.error("Expected ".concat(":")),this.index++;var t=this.parseExpression();return t||this.error("Expected Expression"),{type:"ConditionalExpression",test:e,consequent:r,alternate:t}}},{key:"parseBinaryExpression",value:function(){var e=this.parseToken(),r=this.parseBinaryOperator();if(!r)return e;var t=this.parseToken();r&&!t&&this.error();for(var n=[e,t],i=[r],s=function(){var e=i.pop(),r=n.pop(),t={type:"BinaryExpression",left:n.pop(),operator:e,right:r};n.push(t)},a=null;a=this.parseBinaryOperator();){for(;i[i.length-1]&&this.binaryOps[i[i.length-1].value]>=this.binaryOps[a.value];)s();i.push(a),n.push(this.parseToken())}for(;i.length;)s();return n[0]}},{key:"parseBinaryOperator",value:function(){this.jumpOverSpace();for(var e=this.maxBinaryLen,r=this.index;0<e;){var t=this.expression.slice(this.index,this.index+e);if(!t)return null;if(this.binaryOps.hasOwnProperty(t))return this.index+=e,{type:"BinaryOperator",value:t,start:r,end:this.index};e--}return null}},{key:"parseToken",value:function(){if(this.jumpOverSpace(),!this.getCurrentChar())return null;var e=this.parseUnary()||this.parseVariable()||this.parseNumber()||this.parseString()||this.parseArray();return e||this.error(),e}},{key:"parseUnary",value:function(){for(var e=this.maxUnary,r=this.index;0<e;){var t=this.expression.slice(this.index,this.index+e);if(!t)return null;if(this.unaryOps.hasOwnProperty(t))return this.index+=e,{type:"UnaryExpression",operate:{type:"UnaryOperator",value:t,start:r,end:this.index},argument:this.parseToken()};e--}return null}},{key:"parseNumber",value:function(){var e="",r=this.index,t=!1;for(this.getCurrentChar()===i&&(t=!0,e+=this.getCurrentChar(),this.index++);this.getCurrentChar()&&/^([\de\.])/.test(this.getCurrentChar());)e+=this.getCurrentChar(),this.getCurrentChar()===i&&(t&&this.error(),t=!0),this.index++;return e?(this.isIdentifierStart(this.getCurrentChar())&&this.error("Variable cannot start with number",r),{type:c,value:parseFloat(e),start:r,end:this.index,raw:e}):null}},{key:"parseString",value:function(){var e="",r=!1,t=this.getCurrentChar(),n=this.index;if("'"!==t&&'"'!==t)return null;for(;this.index<this.expression.length;){this.index++;var i=this.getCurrentChar();if(i===t){r=!0;break}if("\\"===i)switch(this.index++,this.getCurrentChar()){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=this.getCurrentChar()}else e+=i}return this.index++,r||this.error("Unclosed quote after \"'".concat(e,"'\"")),{type:c,value:e,start:n,end:this.index,raw:"".concat(t).concat(e).concat(t)}}},{key:"parseArguments",value:function(){for(var e=[];this.index<this.expression.length;){this.jumpOverSpace();var r=this.getCurrentChar();if(r===h||r===p)break;var t=this.parseExpression();this.jumpOverSpace();var n=this.getCurrentChar();if(n===h||n===p){e.push(t);break}","===n&&t&&e.push(t),this.index++}return e}},{key:"parseArray",value:function(){if(this.getCurrentChar()===o){this.index++;var e=this.parseArguments();if(this.jumpOverSpace(),this.getCurrentChar()===h)return this.index++,{type:"ArrayExpression",arguments:e};this.error("Expected ".concat(h))}return null}},{key:"parseVariable",value:function(){return this.parseGroup()||this.parseObject()}},{key:"parseGroup",value:function(){if("("===this.getCurrentChar()){this.index++,this.jumpOverSpace();var e=this.parseExpression();if(this.jumpOverSpace(),this.getCurrentChar()===p)return this.index++,e;this.error("Expected ".concat(p))}return null}},{key:"parseObject",value:function(){var e=this.parseLiteral();if(!e)return null;if("("===this.getCurrentChar()){this.index++,this.jumpOverSpace();var r=this.parseArguments();this.jumpOverSpace(),this.getCurrentChar()===p?(this.index++,e={type:"CallExpression",callee:e,arguments:r}):this.error("Expected ".concat(p))}if(this.getCurrentChar()!==i&&this.getCurrentChar()!==o)return e;for(;this.getCurrentChar()===i||this.getCurrentChar()===o;)if(this.getCurrentChar()===i){this.index++;var t=this.parseLiteral();e={type:l,computed:!1,object:e,property:t}}else if(this.getCurrentChar()===o){this.index++;var n=this.parseExpression();this.jumpOverSpace(),this.getCurrentChar()===h?(this.index++,e={type:l,computed:!0,object:e,property:n}):this.error("Expected ".concat(h))}return e}},{key:"parseLiteral",value:function(){this.jumpOverSpace();var e=this.index,r=this.getCurrentChar();if(this.isIdentifierStart(this.getCurrentChar())){for(this.index++;this.getCurrentChar()&&this.isIdentifierPart(this.getCurrentChar());)r+=this.getCurrentChar(),this.index++;return this.literals.hasOwnProperty(r)?{type:c,start:e,end:this.index,value:this.literals[r],raw:r}:{type:"Identifier",start:e,end:this.index,name:r}}return null}}]),n}();j.version="1.0.2";var E=new j({expression:"empty(getxx(1,xx,dd),haha(),$ab)"});console.log(JSON.stringify(E.getAst()))}],i.c=n,i.d=function(e,r,t){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(r,e){if(1&e&&(r=i(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var n in r)i.d(t,n,function(e){return r[e]}.bind(null,n));return t},i.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="/",i(i.s=0);function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}var t,n});